var N=Object.defineProperty;var b=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var k=(u,n,o)=>n in u?N(u,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[n]=o,A=(u,n)=>{for(var o in n||(n={}))W.call(n,o)&&k(u,o,n[o]);if(b)for(var o of b(n))$.call(n,o)&&k(u,o,n[o]);return u};var C=(u,n,o)=>new Promise((c,f)=>{var B=a=>{try{r(o.next(a))}catch(m){f(m)}},p=a=>{try{r(o.throw(a))}catch(m){f(m)}},r=a=>a.done?c(a.value):Promise.resolve(a.value).then(B,p);r((o=o.apply(u,n)).next())});import{T as J,u as Q,B as X}from"./useForm.6a7b0d23.js";import{h as E,R as S}from"./index.d3015976.js";import{s as F,aA as z,d as H,G as Y,e as y,V as Z,X as ee,i as x,o as ue,Q as te,K as s,J as l,u as i,b5 as w,a8 as ne,T as oe,aa as ae,aL as le,a9 as se,am as ie,aW as re,aq as de}from"./vendor.383f122a.js";import"./useDesignSetting.99238df7.js";import"./index.esm.52493e3c.js";function ce(u){return E.request({url:"CollarPos/index",method:"post",params:u})}function _e(u){return E.request({url:"CollarPos/ship",method:"POST",params:u},{isTransformResponse:!1})}function pe(u){return E.request({url:"CollarPos/signStatus",method:"POST",params:u},{isTransformResponse:!1})}const fe=[{title:"id",key:"id",width:50,align:"center"},{title:"\u540D\u79F0",key:"name",width:100,align:"center"},{title:"\u624B\u673A\u53F7",key:"tel",width:120,align:"center"},{title:"\u5458\u5DE5\u59D3\u540D",key:"name",width:160,align:"center",render(u,n){return F("span",u.user.name)}},{title:"\u5458\u5DE5\u624B\u673A\u53F7",key:"tel",width:160,align:"center",render(u,n){return F("span",u.user.tel)}},{title:"\u8BA2\u5355\u7F16\u53F7",key:"order_no",width:150,align:"center"},{title:"\u7701",key:"province",width:80,align:"center"},{title:"\u5E02",key:"city",width:80,align:"center"},{title:"\u533A",key:"area",width:80,align:"center"},{title:"\u5730\u5740",key:"address",width:150,align:"center"},{title:"\u673A\u5177\u54C1\u724C",key:"brand",width:100,align:"center"},{title:"\u673A\u5177\u7F16\u53F7",key:"sn_no",width:100,align:"center"},{title:"\u72B6\u6001",key:"status",width:100,align:"center",render(u){const n=u.status,o=["\u5F85\u7533\u8BF7","\u5DF2\u7533\u8BF7","\u5DF2\u53D1\u8D27","\u5DF2\u7B7E\u6536","\u5DF2\u62D2\u6536","\u65E0\u6548\u8BA2\u5355"];return F(z,{style:{marginRight:"6px"},type:["default","primary","","success","warning","error"][n]},{default:()=>o[n]})}},{title:"\u5FEB\u9012\u7F16\u53F7",key:"delivery_no",align:"center"},{title:"\u5F00\u59CB\u65E5\u671F",key:"create_date",width:160,align:"center",render(u,n){return F("span",u.created_at)}}],me=w("\u5237\u65B0\u6570\u636E"),ge=w("\u53D6\u6D88"),Fe=w("\u786E\u5B9A"),Ee=H({setup(u){const n={delivery_no:{required:!0,trigger:["blur","input"],message:"\u8BF7\u8F93\u5165\u5FEB\u9012\u5355\u53F7"},sn_no:{required:!0,trigger:["blur","input"],message:"\u8BF7\u8F93\u5165\u673A\u5177\u7F16\u53F7"},brand:{required:!0,trigger:["blur","change"],message:"\u8BF7\u9009\u62E9pos\u673A\u54C1\u724C"}};Y();const o=y(null),c=Z(),f=ee(),B=y(),p=y(!1),r=y(!1),a=x({id:"",brand:"",sn_no:"",delivery_no:""}),m=["\u6D77\u79D1","\u9646pos","\u4ED8\u4E34\u95E8","\u6C47\u4ED8\u5929\u4E0B"].map(e=>({label:e,value:e})),T=x({width:220,title:"\u64CD\u4F5C",key:"action",fixed:"right",align:"center",render(e){return F(J,{style:"button",actions:[{label:"\u53D1\u8D27",icon:"ic:outline-delete-outline",onClick:L.bind(null,e),ifShow:e.delivery_no==""}],dropDownActions:[{label:"\u7B7E\u6536",key:"SignFor",ifShow:()=>e.status=="2"},{label:"\u62D2\u6536",key:"Rejection",ifShow:()=>e.status=="2"},{label:"\u65E0\u6548\u8BA2\u5355",key:"InvalidOrder",ifShow:e.status=="1"}],select:t=>{t==="SignFor"?R(e):t==="Rejection"?P(e):t==="InvalidOrder"&&q(e)}})}});function R(e){f.success({title:"\u7B7E\u6536",content:"\u8BF7\u786E\u8BA4\u60A8\u7684\u5FEB\u9012\u662F\u5426\u5DF2\u88AB\u7B7E\u6536",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",maskClosable:!0,onPositiveClick:()=>{const t={id:e.id,status:3};v(t)}})}function P(e){f.warning({title:"\u62D2\u6536",content:"\u8BF7\u786E\u8BA4\u60A8\u7684\u5FEB\u9012\u662F\u5426\u5DF2\u88AB\u62D2\u6536",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",maskClosable:!0,onPositiveClick:()=>{const t={id:e.id,status:4};v(t)}})}function q(e){f.warning({title:"\u65E0\u6548\u8BA2\u5355",content:"\u6B64\u64CD\u4F5C\u5C06\u5BA2\u6237\u8BBE\u4E3A\u65E0\u6548\u8BA2\u5355\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",maskClosable:!0,onPositiveClick:()=>{const t={id:e.id,status:5};v(t)}})}const v=e=>C(this,null,function*(){try{const{code:t,msg:_}=yield pe(e);t==S.SUCCESS?(c.success(_),h()):c.info(_)}finally{r.value=!1}});Q({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:80});const U=e=>C(this,null,function*(){return yield ce(A({},e))});function O(e){console.log(e)}function h(){B.value.reload()}function I(e){e.preventDefault(),r.value=!0,o.value.validate(t=>C(this,null,function*(){if(t)c.error("\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");else try{const{code:_,msg:g}=yield _e(a);_==S.SUCCESS?(p.value=!1,c.success(g),h()):c.info(g||"\u53D1\u8D27\u5931\u8D25")}finally{r.value=!1}r.value=!1}))}function L(e){a.id=e.id,p.value=!0}return(e,t)=>{const _=ne,g=oe,D=ae,j=le,G=se,V=ie,K=re,M=de;return ue(),te(M,{bordered:!1,class:"proCard"},{default:s(()=>[l(i(X),{title:"\u8BA2\u5355\u5217\u8868",titleTooltip:"\u8BA2\u5355\u5217\u8868",columns:i(fe),request:U,"row-key":d=>d.id,ref_key:"actionRef",ref:B,bordered:!0,"single-line":!1,actionColumn:i(T),"onUpdate:checkedRowKeys":O,"scroll-x":1090},{toolbar:s(()=>[l(_,{type:"primary",onClick:h},{default:s(()=>[me]),_:1})]),_:1},8,["columns","row-key","actionColumn"]),l(K,{show:p.value,"onUpdate:show":t[4]||(t[4]=d=>p.value=d),"show-icon":!1,preset:"dialog",title:"\u65B0\u5EFA"},{action:s(()=>[l(V,null,{default:s(()=>[l(_,{onClick:t[3]||(t[3]=()=>p.value=!1)},{default:s(()=>[ge]),_:1}),l(_,{type:"info",loading:r.value,onClick:I},{default:s(()=>[Fe]),_:1},8,["loading"])]),_:1})]),default:s(()=>[l(G,{model:i(a),rules:n,ref_key:"formRef",ref:o,"label-placement":"left","label-width":80,class:"py-4"},{default:s(()=>[l(D,{label:"\u673A\u5177\u7F16\u53F7",path:"sn_no"},{default:s(()=>[l(g,{placeholder:"\u8BF7\u8F93\u5165\u673A\u5177\u7F16\u53F7",value:i(a).sn_no,"onUpdate:value":t[0]||(t[0]=d=>i(a).sn_no=d)},null,8,["value"])]),_:1}),l(D,{label:"\u5FEB\u9012\u5355\u53F7",path:"address"},{default:s(()=>[l(g,{placeholder:"\u8BF7\u8F93\u5165\u5FEB\u9012\u5355\u53F7",value:i(a).delivery_no,"onUpdate:value":t[1]||(t[1]=d=>i(a).delivery_no=d)},null,8,["value"])]),_:1}),l(D,{label:"pos\u673A\u54C1\u724C",path:"brand"},{default:s(()=>[l(j,{value:i(a).brand,"onUpdate:value":t[2]||(t[2]=d=>i(a).brand=d),placeholder:"\u8BF7\u9009\u62E9pos\u673A\u54C1\u724C",options:i(m)},null,8,["value","options"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])]),_:1})}}});export{Ee as default};
